# 線種（点線・破線）と補助線

DXFにおいて、線の見た目を変える「線種（Linetype）」と、作図の目安として使われる「補助線（建設線）」の扱いについて解説します。

---

## 1. 線種 (Linetypes)

実線、破線、一点鎖線などのパターンのことです。

### 仕組み
1. **定義**: `TABLES` セクションの `LTYPE` テーブルで、パターンの名前（`DASHED` 等）と、ダッシュ・スペースの長さを定義します。
2. **参照**: 各エンティティ（`LINE` や `LWPOLYLINE` 等）の **グループコード 6** で、定義された線種名を指定します。

### グループコード 6 の指定
- `ByLayer`: 画層（Layer）に設定されている線種をそのまま使用します（デフォルト）。
- `CONTINUOUS`: 実線（常に存在）。
- `DASHED`: 破線。
- `CENTER`: 一点鎖線。
- `DOT`: 点線。

### 線種スケール (Linetype Scale)
図面の大きさに合わせてパターンの密度を調整するための倍率です。
- **グループコード 48**: 個別のエンティティに対する倍率。
- **$LTSCALE**: 図面全体に対する共通の倍率（ヘッダー変数）。

---

## 2. 補助線・建設線 (Construction Lines)

作図を補助するために使われる、無限または半無限の線です。

### XLINE (建設線)
- **特徴**: 両方向に無限に伸びる直線です。
- **グループコード**:
    - `10, 20, 30`: 通過点。
    - `11, 21, 31`: 方向ベクトル。
- **用途**: 中心線やグリッドの基準線。

### RAY (放射線)
- **特徴**: 始点から一方向にのみ無限に伸びる直線です。
- **グループコード**:
    - `10, 20, 30`: 始点。
    - `11, 21, 31`: 方向ベクトル。

---

## 3. 実装上の注意とベストプラクティス

### ① 線種定義の欠落
DXFで `DASHED` などの線種を参照していても、`TABLES` セクションにその定義がない場合、多くのソフトでは実線として表示されます。
- **対策**: 自作のDXFを出力する場合は、参照する線種定義を必ず `LTYPE` テーブルに含めるようにしてください。

### ② 補助線の印刷
`XLINE` や `RAY` は非常に長いため、印刷時に邪魔になることがあります。
- **運用**: 補助線専用の画層（例: `DEFPOINTS` 画層や自作の `AUX` 画層）を作成し、その画層を「非印刷」設定にするのが一般的なCADの作法です。

### ③ 加工機での扱い
レーザーカッターやCNCなどの加工機は、無限に伸びる `XLINE` や `RAY` を正しく処理できないことが多いです。
- **対策**: 加工データとして書き出す際は、補助線を削除するか、通常の短い `LINE` に変換することをお勧めします。

---

## まとめ

| 種類 | 役割 | DXFでの表現 |
| :--- | :--- | :--- |
| **点線・破線** | 見た目のパターン | `LTYPE` テーブル + グループコード `6` |
| **無限線** | 作図の基準 | `XLINE` エンティティ |
| **放射線** | 作図の基準 | `RAY` エンティティ |
| **補助用画層** | 管理の共通化 | `LAYER` テーブルでの管理 |

---

関連：[テーブルとレイヤー](../structure/tables-and-layers.md) | [共通エンティティ](./common-entities.md) | [よくある罠](../implementation/common-pitfalls.md)

