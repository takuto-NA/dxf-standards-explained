# DXF vs SVG

DXFとSVGは、どちらも2Dベクター形式ですが、設計思想と用途が大きく異なります。CAD図面とWebグラフィックスの違いを理解することで、適切な形式を選択できます。

## 形式の違い

### DXF (Drawing Exchange Format)
**CAD図面形式**

- **用途**: 技術図面、建築図面、機械設計
- **座標系**: 実世界の単位（メートル、インチなど）
- **精度**: 非常に高い（浮動小数点、ミクロン単位まで）
- **対象**: CADソフト、製造業、建設業

### SVG (Scalable Vector Graphics)
**Webグラフィックス形式**

- **用途**: Webページ、アイコン、イラスト
- **座標系**: 画面座標（ピクセル）
- **精度**: 画面表示に適した精度
- **対象**: Webブラウザ、グラフィックソフト

## 比較表

| 項目 | DXF | SVG |
| :--- | :--- | :--- |
| **用途** | CAD図面 | Webグラフィックス |
| **座標系** | 実世界単位 | 画面座標（ピクセル） |
| **精度** | 非常に高い | 画面表示レベル |
| **単位** | メートル、インチなど | ピクセル、パーセント |
| **3D対応** | あり（制限的） | なし（2D専用） |
| **レイヤー** | あり（画層） | あり（グループ） |
| **テキスト** | 高度な制御 | 基本的な制御 |
| **アニメーション** | なし | あり |
| **インタラクティブ** | なし | あり（JavaScript） |
| **ファイルサイズ** | 大きい | 小さい（圧縮可能） |

## 詳細な比較

### 1. 座標系と単位

**DXF**:
- 実世界の単位（メートル、インチ、フィートなど）を使用
- 座標値は実寸法を表す
- 例: `10.0` = 10メートル（または10インチ、設定による）

**SVG**:
- 画面座標（ピクセル）を使用
- 座標値は画面上の位置を表す
- 例: `10` = 10ピクセル

### 2. 精度

**DXF**:
- 浮動小数点で高精度な座標を表現
- ミクロン単位まで正確に表現可能
- 製造や建設に必要な精度を満たす

**SVG**:
- 画面表示に適した精度
- 整数または少数点以下数桁の精度
- 印刷品質には対応しているが、CADレベルの精度は不要

### 3. 3D対応

**DXF**:
- 3D座標（X, Y, Z）をサポート
- OCS（オブジェクト座標系）による3Dエンティティの配置
- 建築や機械設計で3Dモデルを扱う

**SVG**:
- 2D専用（X, Yのみ）
- 3D効果はCSS3DやWebGLで実現（SVG自体は2D）

### 4. レイヤー/グループ

**DXF**:
- **画層（Layer）**: エンティティをグループ化し、表示/非表示、色、線種を一括管理
- 技術図面の標準的な管理方法

**SVG**:
- **グループ（`<g>`）**: 要素をグループ化し、変換やスタイルを適用
- Webページの構造化に適している

### 5. テキスト

**DXF**:
- 高度なテキスト制御（スタイル、高さ、幅係数、傾斜など）
- 技術図面に必要な詳細な設定が可能

**SVG**:
- 基本的なテキスト制御（フォント、サイズ、色など）
- Webページのテキスト表示に適している

### 6. アニメーションとインタラクティブ

**DXF**:
- アニメーション機能なし
- インタラクティブ機能なし
- 静的図面専用

**SVG**:
- **アニメーション**: `<animate>` 要素やCSSアニメーション
- **インタラクティブ**: JavaScriptによる操作が可能
- **イベント**: クリック、ホバーなどのイベント処理

## デザインソフトとDXF

### Inkscape
**特徴**: オープンソースのベクターグラフィックエディタ。DXFのインポート・エクスポートに標準で対応しています。

- **インポート**: DXFを読み込んで編集可能なベクターデータとして扱えます。
- **エクスポート**: 「名前を付けて保存」から `AutoCAD DXF R12` または `R14` を選択できます。
- **用途**: 手書きのイラストをスキャンしてベクター化（トレース）し、DXFとして書き出してレーザーカッターで加工する、といったワークフローによく使われます。

---

## 変換の可能性

### DXF → SVG 変換

**可能**: 2D図面をSVGに変換することは可能ですが、以下の制限があります：

1. **3D情報の損失**: Z座標は無視される
2. **精度の調整**: 実世界単位をピクセルに変換する必要がある
3. **機能の簡略化**: DXFの高度な機能（寸法、ハッチングなど）は簡略化される

**ツール**:
- `ezdxf`（Python）+ SVGライブラリ
- 専用変換ツール

### SVG → DXF 変換

**困難**: SVGをDXFに変換することは技術的に可能ですが、以下の問題があります：

1. **単位の変換**: ピクセルを実世界単位に変換する必要がある
2. **精度の不足**: SVGの精度ではCADレベルの精度を満たさない
3. **機能の不足**: SVGにはCAD特有の機能（寸法、ブロックなど）がない

**推奨**: SVGからDXFへの変換は、単純な図形の場合のみ実用的です。

## 使用シーン別の推奨

### DXFを使用すべき場合

1. **技術図面**: 建築、機械、電気などの技術図面
2. **製造**: CNC加工、3Dプリンティングなどの製造データ
3. **測量**: 土地測量、建設現場の図面
4. **CAD作業**: AutoCADなどのCADソフトでの作業
5. **高精度が必要**: ミクロン単位の精度が必要な場合

### SVGを使用すべき場合

1. **Webページ**: Webサイトのグラフィックス、アイコン
2. **イラスト**: ベクターイラスト、ロゴ
3. **インタラクティブ**: ユーザー操作が必要なグラフィックス
4. **アニメーション**: 動的なグラフィックス
5. **レスポンシブ**: 画面サイズに応じて拡大縮小するグラフィックス

## 実装上の考慮事項

### DXFからSVGへの変換

```python
# 疑似コード
def dxf_to_svg(dxf_file, output_svg):
    doc = ezdxf.readfile(dxf_file)
    svg = SVG()
    
    # 単位変換（メートル → ピクセル）
    scale = 100  # 1メートル = 100ピクセル
    
    for entity in doc.modelspace():
        if entity.dxftype() == 'LINE':
            x1 = entity.start.x * scale
            y1 = entity.start.y * scale
            x2 = entity.end.x * scale
            y2 = entity.end.y * scale
            svg.add_line(x1, y1, x2, y2)
        # ... 他のエンティティ
    
    svg.save(output_svg)
```

**注意点**:
- スケールファクターの決定が重要
- 3D情報は無視される
- 複雑なエンティティ（スプライン、ハッチングなど）は簡略化が必要

### SVGからDXFへの変換

**推奨されない**: 精度と機能の違いにより、実用的ではありません。

## まとめ

| 形式 | 推奨用途 |
| :--- | :--- |
| **DXF** | 技術図面、製造、CAD作業、高精度が必要な場合 |
| **SVG** | Webページ、イラスト、インタラクティブグラフィックス |

**選択の指針**:
- **CAD図面**: DXFを使用
- **Webグラフィックス**: SVGを使用
- **変換**: DXF → SVG は可能だが制限あり、SVG → DXF は推奨されない

どちらの形式も、それぞれの用途に最適化されているため、用途に応じて適切に選択することが重要です。

---
関連：[DXF vs DWG](./dxf-vs-dwg.md) | [産業用フォーマット（ガーバー、Gコード）との比較](./dxf-vs-industrial-formats.md)